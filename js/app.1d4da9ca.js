(function(e){function t(t){for(var a,i,o=t[0],c=t[1],u=t[2],l=0,d=[];l<o.length;l++)i=o[l],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);b&&b(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,i=1;i<n.length;i++){var o=n[i];0!==r[o]&&(a=!1)}a&&(s.splice(t--,1),e=u(u.s=n[0]))}return e}var a={},r={app:0},s=[];function i(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-8d5a7e10":"58a83714"}[e]+".js"}var o={};var c={"21a2":function(){return{"./equinox_bg.js":{__wbindgen_object_drop_ref:function(e){return a["bcbd"].exports["Kb"](e)},__wbindgen_json_serialize:function(e,t){return a["bcbd"].exports["Fb"](e,t)},__wbindgen_json_parse:function(e,t){return a["bcbd"].exports["Eb"](e,t)},__wbindgen_string_new:function(e,t){return a["bcbd"].exports["Mb"](e,t)},__wbindgen_number_new:function(e){return a["bcbd"].exports["Ib"](e)},__wbindgen_object_clone_ref:function(e){return a["bcbd"].exports["Jb"](e)},__wbindgen_is_null:function(e){return a["bcbd"].exports["Cb"](e)},__wbindgen_is_undefined:function(e){return a["bcbd"].exports["Db"](e)},__wbg_new_59cb74e423758ede:function(){return a["bcbd"].exports["fb"]()},__wbg_stack_558ba5917b466edd:function(e,t){return a["bcbd"].exports["nb"](e,t)},__wbg_error_4bb6c2a97407129a:function(e,t){return a["bcbd"].exports["L"](e,t)},__wbg_bindBufferBase_6ff29514b22d37bd:function(e,t,n,r){return a["bcbd"].exports["e"](e,t,n,r)},__wbg_bindVertexArray_59be0e2201d7dbdd:function(e,t){return a["bcbd"].exports["i"](e,t)},__wbg_bufferData_82799aba801baf03:function(e,t,n,r){return a["bcbd"].exports["l"](e,t,n,r)},__wbg_bufferSubData_e02140de54b31ee6:function(e,t,n,r,s){return a["bcbd"].exports["m"](e,t,n,r,s)},__wbg_clearBufferfv_a57c8211ccdab5b1:function(e,t,n,r,s){return a["bcbd"].exports["q"](e,t,n,r,s)},__wbg_compressedTexSubImage3D_8c28e7f1b0bdc925:function(e,t,n,r,s,i,o,c,u,l,d){return a["bcbd"].exports["s"](e,t,n,r,s,i,o,c,u,l,d)},__wbg_createVertexArray_cc565c538c3ff35e:function(e){return a["bcbd"].exports["y"](e)},__wbg_deleteVertexArray_add9ea186273c33f:function(e,t){return a["bcbd"].exports["F"](e,t)},__wbg_drawBuffers_d1bddd98e11d3e24:function(e,t){return a["bcbd"].exports["I"](e,t)},__wbg_getUniformBlockIndex_cf9cce994b01a40a:function(e,t,n,r){return a["bcbd"].exports["V"](e,t,n,r)},__wbg_texStorage2D_adacf409ade47185:function(e,t,n,r,s,i){return a["bcbd"].exports["pb"](e,t,n,r,s,i)},__wbg_texStorage3D_6f2199095f480c7a:function(e,t,n,r,s,i,o){return a["bcbd"].exports["qb"](e,t,n,r,s,i,o)},__wbg_texSubImage2D_eae16e5ca44fa95a:function(e,t,n,r,s,i,o,c,u,l){return a["bcbd"].exports["rb"](e,t,n,r,s,i,o,c,u,l)},__wbg_texSubImage3D_1296ee54bab869fd:function(e,t,n,r,s,i,o,c,u,l,d,p){return a["bcbd"].exports["sb"](e,t,n,r,s,i,o,c,u,l,d,p)},__wbg_uniformBlockBinding_23e4ab8e329dbd44:function(e,t,n,r){return a["bcbd"].exports["vb"](e,t,n,r)},__wbg_vertexAttribIPointer_ccc4f8cfa6506c09:function(e,t,n,r,s,i){return a["bcbd"].exports["xb"](e,t,n,r,s,i)},__wbg_activeTexture_8c0f299bfec3fb46:function(e,t){return a["bcbd"].exports["c"](e,t)},__wbg_attachShader_5eff139e1b567fc5:function(e,t,n){return a["bcbd"].exports["d"](e,t,n)},__wbg_bindBuffer_4d9ee91ad842ba92:function(e,t,n){return a["bcbd"].exports["f"](e,t,n)},__wbg_bindFramebuffer_909497f01b22ae78:function(e,t,n){return a["bcbd"].exports["g"](e,t,n)},__wbg_bindTexture_28d8d5d1a523ac28:function(e,t,n){return a["bcbd"].exports["h"](e,t,n)},__wbg_blendEquation_2e1eca377895d907:function(e,t){return a["bcbd"].exports["j"](e,t)},__wbg_blendFunc_17a5b103e8a5ae98:function(e,t,n){return a["bcbd"].exports["k"](e,t,n)},__wbg_checkFramebufferStatus_3538e03ee8ff5d51:function(e,t){return a["bcbd"].exports["p"](e,t)},__wbg_compileShader_54ff8de585d7b3ee:function(e,t){return a["bcbd"].exports["r"](e,t)},__wbg_createBuffer_ff6fae04a8379012:function(e){return a["bcbd"].exports["t"](e)},__wbg_createFramebuffer_cff051073cc4f9de:function(e){return a["bcbd"].exports["u"](e)},__wbg_createProgram_4f13aad8942a0f0d:function(e){return a["bcbd"].exports["v"](e)},__wbg_createShader_bc96d3d7082bf183:function(e,t){return a["bcbd"].exports["w"](e,t)},__wbg_createTexture_c87d4dc81bfac194:function(e){return a["bcbd"].exports["x"](e)},__wbg_deleteBuffer_645e4d4e80e2ea5b:function(e,t){return a["bcbd"].exports["A"](e,t)},__wbg_deleteFramebuffer_604948d1ba036dcc:function(e,t){return a["bcbd"].exports["B"](e,t)},__wbg_deleteProgram_04bdadacd621fd42:function(e,t){return a["bcbd"].exports["C"](e,t)},__wbg_deleteShader_b109483996812918:function(e,t){return a["bcbd"].exports["D"](e,t)},__wbg_deleteTexture_1577f0a89813c9e6:function(e,t){return a["bcbd"].exports["E"](e,t)},__wbg_disable_36a1b52f923e9ece:function(e,t){return a["bcbd"].exports["G"](e,t)},__wbg_drawArrays_0f3e5369dd3cb8d5:function(e,t,n,r){return a["bcbd"].exports["H"](e,t,n,r)},__wbg_enable_b726776a768bd24d:function(e,t){return a["bcbd"].exports["K"](e,t)},__wbg_enableVertexAttribArray_ccbac340a301dac1:function(e,t){return a["bcbd"].exports["J"](e,t)},__wbg_framebufferTexture2D_2bdf4f4f57064288:function(e,t,n,r,s,i){return a["bcbd"].exports["N"](e,t,n,r,s,i)},__wbg_getError_1bcdd7e967bb84a5:function(e){return a["bcbd"].exports["O"](e)},__wbg_getExtension_e3f8c57f032be64c:function(e,t,n){return a["bcbd"].exports["P"](e,t,n)},__wbg_getParameter_acf39109736e1337:function(e,t){return a["bcbd"].exports["Q"](e,t)},__wbg_getProgramInfoLog_990ced340fabdcbb:function(e,t,n){return a["bcbd"].exports["R"](e,t,n)},__wbg_getProgramParameter_e44f5daeacd98160:function(e,t,n){return a["bcbd"].exports["S"](e,t,n)},__wbg_getShaderInfoLog_fd5c172fb8c03b96:function(e,t,n){return a["bcbd"].exports["T"](e,t,n)},__wbg_getShaderParameter_7071856a1f55aa97:function(e,t,n){return a["bcbd"].exports["U"](e,t,n)},__wbg_getUniformLocation_4b3c35f82457bdf3:function(e,t,n,r){return a["bcbd"].exports["W"](e,t,n,r)},__wbg_isContextLost_9350a57366143f8d:function(e){return a["bcbd"].exports["Z"](e)},__wbg_linkProgram_dc68765f87076be7:function(e,t){return a["bcbd"].exports["bb"](e,t)},__wbg_shaderSource_dc7ae56eec603808:function(e,t,n,r){return a["bcbd"].exports["mb"](e,t,n,r)},__wbg_texParameteri_c1771e59529aea60:function(e,t,n,r){return a["bcbd"].exports["ob"](e,t,n,r)},__wbg_uniform1i_e99a16be2875dc87:function(e,t,n){return a["bcbd"].exports["tb"](e,t,n)},__wbg_uniform2i_b7ea001a16ba4ae7:function(e,t,n,r){return a["bcbd"].exports["ub"](e,t,n,r)},__wbg_useProgram_f3c9bc74cb69780f:function(e,t){return a["bcbd"].exports["wb"](e,t)},__wbg_viewport_0b056ac66214d59d:function(e,t,n,r,s){return a["bcbd"].exports["yb"](e,t,n,r,s)},__wbg_debug_ef2b78738889619f:function(e){return a["bcbd"].exports["z"](e)},__wbg_error_7dcc755846c00ef7:function(e){return a["bcbd"].exports["M"](e)},__wbg_info_43f70b84e943346e:function(e){return a["bcbd"].exports["X"](e)},__wbg_log_61ea781bd002cc41:function(e){return a["bcbd"].exports["cb"](e)},__wbg_warn_502e53bc79de489a:function(e){return a["bcbd"].exports["zb"](e)},__wbg_new_17534eac4df3cd22:function(){return a["bcbd"].exports["db"]()},__wbg_push_7114ccbf1c58e41f:function(e,t){return a["bcbd"].exports["kb"](e,t)},__wbg_new_4896ab6bba55e0d9:function(e,t){return a["bcbd"].exports["eb"](e,t)},__wbg_call_0dad7db75ec90ae7:function(e,t,n){return a["bcbd"].exports["o"](e,t,n)},__wbg_buffer_88f603259d7a7b82:function(e){return a["bcbd"].exports["n"](e)},__wbg_newwithbyteoffsetandlength_a048d126789a272b:function(e,t,n){return a["bcbd"].exports["jb"](e,t,n)},__wbg_length_2e98733d73dac355:function(e){return a["bcbd"].exports["ab"](e)},__wbg_new_85d8a1fc4384acef:function(e){return a["bcbd"].exports["hb"](e)},__wbg_set_478951586c457484:function(e,t,n){return a["bcbd"].exports["lb"](e,t,n)},__wbg_newwithbyteoffsetandlength_3a085e8526eb473c:function(e,t,n){return a["bcbd"].exports["ib"](e,t,n)},__wbg_new_7741b4c15e9a2dbe:function(e){return a["bcbd"].exports["gb"](e)},__wbg_instanceof_Uint8Array_f334fbbaf83a3430:function(e){return a["bcbd"].exports["Y"](e)},__wbindgen_number_get:function(e,t){return a["bcbd"].exports["Hb"](e,t)},__wbindgen_boolean_get:function(e){return a["bcbd"].exports["Ab"](e)},__wbindgen_debug_string:function(e,t){return a["bcbd"].exports["Bb"](e,t)},__wbindgen_throw:function(e,t){return a["bcbd"].exports["Nb"](e,t)},__wbindgen_rethrow:function(e){return a["bcbd"].exports["Lb"](e)},__wbindgen_memory:function(){return a["bcbd"].exports["Gb"]()}}}}};function u(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=r[e]=[t,a]}));t.push(n[2]=a);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=i(e);var d=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(p);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+s+")",d.name="ChunkLoadError",d.type=a,d.request=s,n[1](d)}r[e]=void 0}};var p=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}var b={"chunk-8d5a7e10":["21a2"]}[e]||[];return b.forEach((function(e){var n=o[e];if(n)t.push(n);else{var a,r=c[e](),s=fetch(u.p+""+{"21a2":"be8607d6efabc2872f4f"}[e]+".module.wasm");if(r instanceof Promise&&"function"===typeof WebAssembly.compileStreaming)a=Promise.all([WebAssembly.compileStreaming(s),r]).then((function(e){return WebAssembly.instantiate(e[0],e[1])}));else if("function"===typeof WebAssembly.instantiateStreaming)a=WebAssembly.instantiateStreaming(s,r);else{var i=s.then((function(e){return e.arrayBuffer()}));a=i.then((function(e){return WebAssembly.instantiate(e,r)}))}t.push(o[e]=a.then((function(t){return u.w[e]=(t.instance||t).exports})))}})),Promise.all(t)},u.m=e,u.c=a,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)u.d(n,a,function(t){return e[t]}.bind(null,a));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/equinox/",u.oe=function(e){throw console.error(e),e},u.w={};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var p=0;p<l.length;p++)t(l[p]);var b=d;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"034f":function(e,t,n){"use strict";var a=n("64a9"),r=n.n(a);r.a},"053e":function(e,t,n){"use strict";var a=n("4d47"),r=n.n(a);r.a},"09e7":function(e,t,n){"use strict";var a=n("9024"),r=n.n(a);r.a},1:function(e,t){},2:function(e,t){},"2bef":function(e,t,n){"use strict";var a=n("a921"),r=n.n(a);r.a},3233:function(e,t,n){},"3f5e":function(e,t,n){},"437d":function(e,t,n){},"4d47":function(e,t,n){},"4e28":function(e,t,n){},"5a91":function(e,t,n){"use strict";var a=n("437d"),r=n.n(a);r.a},"64a9":function(e,t,n){},"6a2f":function(e,t,n){"use strict";var a=n("8919"),r=n.n(a);r.a},"6a9b":function(e,t,n){},"850f":function(e,t,n){"use strict";var a=n("6a9b"),r=n.n(a);r.a},8919:function(e,t,n){},"8a78":function(e,t,n){"use strict";var a=n("fbb9"),r=n.n(a);r.a},9024:function(e,t,n){},"9ede":function(e,t,n){},a921:function(e,t,n){},b2b4:function(e,t,n){"use strict";var a=n("4e28"),r=n.n(a);r.a},cd49:function(e,t,n){"use strict";n.r(t);n("96cf");var a=n("3b8d"),r=(n("cadf"),n("551c"),n("f751"),n("097d"),n("2b0e")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"canvas-panel"},[n("CanvasContainer",{attrs:{equinox:e.equinox,scene:e.scene,"assets-in-flight":e.assetsInFlight,"load-assets":e.loadAssets,"clear-assets":e.clearAssets,"get-asset":e.getAsset}})],1),n("div",{staticClass:"editor-panel"},[n("EditorContainer",{staticClass:"editor",attrs:{"tabs-above":e.editorTabsAbove,"tabs-below":e.editorTabsBelow,defaultTab:e.defaultEditorTab}},[n("template",{slot:"tab-head-advanced"},[e._v("Advanced Editor")]),n("template",{slot:"tab-panel-advanced"},[n("AdvancedEditor",{attrs:{scene:e.scene}})],1),n("template",{slot:"tab-head-camera"},[e._v("Camera")]),n("template",{slot:"tab-panel-camera"},[n("CameraEditor",{attrs:{scene:e.scene}})],1),n("template",{slot:"tab-head-environment"},[e._v("Environment")]),n("template",{slot:"tab-panel-environment"},[n("EnvironmentEditor",{attrs:{scene:e.scene}})],1),n("template",{slot:"tab-head-documentation"},[e._v("Documentation")]),n("template",{slot:"tab-panel-documentation"},[n("DocumentationEditor")],1),n("template",{slot:"tab-head-save-load"},[e._v("Save/Load")]),n("template",{slot:"tab-panel-save-load"},[n("SaveLoadEditor",{attrs:{scene:e.scene}})],1),n("template",{slot:"tab-head-licensing"},[e._v("Licensing")]),n("template",{slot:"tab-panel-licensing"},[n("LicensingEditor",{attrs:{licensing:e.equinox.licensing(),version:e.equinox.version()}})],1)],2)],1)])},i=[],o=(n("a481"),n("aef6"),n("34ef"),n("768b")),c=(n("6762"),n("2fdb"),n("ac4d"),n("8a81"),n("ac6a"),n("5df3"),n("f400"),n("d225")),u=n("b0b4"),l=n("308d"),d=n("6bb5"),p=n("4e2b"),b=n("9ab4"),h=n("60a3"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"settings"},[n("div",{staticClass:"settings-cell settings-label"},[e._v("Environment Type")]),n("div",{staticClass:"settings-cell"},[n("select",{attrs:{selected:""},domProps:{value:e.environmentType},on:{change:function(t){return e.changeEnvironmentType(t.target.value)}}},[n("option",{attrs:{value:"solid"}},[e._v("Solid")]),n("option",{attrs:{value:"map"}},[e._v("Map")])])]),n("div",{staticClass:"settings-cell settings-label"},[e._v("Environment Map")]),n("div",{staticClass:"settings-cell"},[n("select",{attrs:{disabled:!e.isMapEnvironment,selected:""},domProps:{value:e.environmentMap},on:{change:function(t){return e.changeEnvironmentMap(t.target.value)}}},e._l(e.ENVIRONMENT_MAPS,(function(t){return n("option",{key:t.data,domProps:{value:t.data}},[e._v(e._s(t.name))])})),0)]),n("div",{staticClass:"settings-cell settings-label"},[e._v("Environment Tint (R)")]),n("div",{staticClass:"settings-cell"},[n("vue-slider",{attrs:{min:0,max:1,tooltip:"none",interval:1e-4,value:e.environmentTint[0],contained:"true"},on:{change:e.changeEnvironmentTintR,dragging:e.changeEnvironmentTintR}})],1),n("div",{staticClass:"settings-cell settings-label"},[e._v("Environment Tint (G)")]),n("div",{staticClass:"settings-cell"},[n("vue-slider",{attrs:{min:0,max:1,tooltip:"none",interval:1e-4,value:e.environmentTint[1],contained:"true"},on:{change:e.changeEnvironmentTintG,dragging:e.changeEnvironmentTintG}})],1),n("div",{staticClass:"settings-cell settings-label"},[e._v("Environment Tint (B)")]),n("div",{staticClass:"settings-cell"},[n("vue-slider",{attrs:{min:0,max:1,tooltip:"none",interval:1e-4,value:e.environmentTint[2],contained:"true"},on:{change:e.changeEnvironmentTintB,dragging:e.changeEnvironmentTintB}})],1),n("div",{staticClass:"settings-cell settings-label"},[e._v("Environment Rotation")]),n("div",{staticClass:"settings-cell"},[n("vue-slider",{attrs:{min:0,max:6.2832,disabled:!e.isMapEnvironment,tooltip:"none",interval:1e-4,value:e.environmentRotation,contained:"true"},on:{change:e.changeEnvironmentRotation,dragging:e.changeEnvironmentRotation}})],1)])])},f=[],m=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(l["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.ENVIRONMENT_MAPS=[{name:"Aft Lounge (1K)",data:"aft_lounge_1k.raw"},{name:"Aft Lounge (2K)",data:"aft_lounge_2k.raw"},{name:"Aft Lounge (4K)",data:"aft_lounge_4k.raw"},{name:"Aft Lounge (8K)",data:"aft_lounge_8k.raw"},{name:"Bethnal Green Entrance (4K)",data:"bethnal_green_entrance_4k.raw"},{name:"Between Bridges (1K)",data:"between_bridges_1k.raw"},{name:"Between Bridges (2K)",data:"between_bridges_2k.raw"},{name:"Between Bridges (4K)",data:"between_bridges_4k.raw"},{name:"Between Bridges (8K)",data:"between_bridges_8k.raw"},{name:"Blue Grotto (4K)",data:"blue_grotto_4k.raw"},{name:"Blue Lagoon Night (4K)",data:"blue_lagoon_night_4k.raw"},{name:"Blue Lagoon Night (8K)",data:"blue_lagoon_night_8k.raw"},{name:"Carpentry Shop 02 (4K)",data:"carpentry_shop_02_4k.raw"},{name:"Cayley Interior (8K)",data:"cayley_interior_8k.raw"},{name:"Cinema Lobby (4K)",data:"cinema_lobby_4k.raw"},{name:"Cinema Lobby (8K)",data:"cinema_lobby_8k.raw"},{name:"Green Point Park (8K)",data:"green_point_park_8k.raw"},{name:"Lenong 2 (1K)",data:"lenong_2_1k.raw"},{name:"Lenong 2 (2K)",data:"lenong_2_2k.raw"},{name:"Lenong 2 (4K)",data:"lenong_2_4k.raw"},{name:"Moonless Golf (4K)",data:"moonless_golf_4k.raw"},{name:"Moonless Golf (8K)",data:"moonless_golf_8k.raw"},{name:"Noon Grass (2K)",data:"noon_grass_2k.raw"},{name:"Noon Grass (4K)",data:"noon_grass_4k.raw"},{name:"Noon Grass (8K)",data:"noon_grass_8k.raw"},{name:"Old Outdoor Theater (4K)",data:"old_outdoor_theater_4k.raw"},{name:"Paul Lobe Haus (4K)",data:"paul_lobe_haus_4k.raw"},{name:"Sunny Vondelpark (2K)",data:"sunny_vondelpark_2k.raw"},{name:"Sunny Vondelpark (4K)",data:"sunny_vondelpark_4k.raw"},{name:"Sunny Vondelpark (8K)",data:"sunny_vondelpark_8k.raw"}],e.environmentType="solid",e.environmentMap=null,e.environmentTint=[1,1,1],e.environmentRotation=0,e}return Object(p["a"])(t,e),Object(u["a"])(t,[{key:"changeEnvironmentMap",value:function(e){this.environmentMap=e,this.update()}},{key:"changeEnvironmentType",value:function(e){this.environmentType=e,"map"===this.environmentType&&null===this.environmentMap&&(this.environmentMap=this.ENVIRONMENT_MAPS[0].data),this.update()}},{key:"changeEnvironmentRotation",value:function(e){this.environmentRotation=e,this.update()}},{key:"changeEnvironmentTintR",value:function(e){this.environmentTint[0]=e,this.update()}},{key:"changeEnvironmentTintG",value:function(e){this.environmentTint[1]=e,this.update()}},{key:"changeEnvironmentTintB",value:function(e){this.environmentTint[2]=e,this.update()}},{key:"created",value:function(){var e=this.getSceneData(),t=Object(o["a"])(e,2),n=t[0],a=t[1];this.environmentType=a.type,this.environmentTint=a.tint,"map"===a.type&&(this.environmentRotation=a.rotation),this.environmentMap=n.environment_map}},{key:"update",value:function(){var e=this.getSceneData(),t=Object(o["a"])(e,2),n=t[0],a=t[1];a.type=this.environmentType,a.tint=this.environmentTint,"map"===a.type&&(a.rotation=this.environmentRotation),n.environment_map=this.environmentMap,this.scene.set_json(n)}},{key:"getSceneData",value:function(){var e=this.scene.json();return[e,e.environment]}},{key:"isMapEnvironment",get:function(){return"map"===this.environmentType}}]),t}(h["c"]);Object(b["a"])([Object(h["b"])()],m.prototype,"scene",void 0),m=Object(b["a"])([h["a"]],m);var _=m,g=_,y=(n("5a91"),n("2877")),x=Object(y["a"])(g,v,f,!1,null,"0fe055c9",null),w=x.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"settings"},[n("div",{staticClass:"settings-cell settings-label"},[e._v("Field of View")]),n("div",{staticClass:"settings-cell"},[n("vue-slider",{attrs:{min:.01,max:1,tooltip:"none",interval:.001,value:e.fieldOfView,contained:"true"},on:{change:e.changeFieldOfView,dragging:e.changeFieldOfView}})],1),n("div",{staticClass:"settings-cell settings-label"},[e._v("Focal Curvature")]),n("div",{staticClass:"settings-cell"},[n("vue-slider",{attrs:{min:0,max:1,tooltip:"none",interval:.001,value:e.focalCurvature,contained:"true"},on:{change:e.changeFocalCurvature,dragging:e.changeFocalCurvature}})],1),n("div",{staticClass:"settings-cell settings-label"},[e._v("Aperture Type")]),n("div",{staticClass:"settings-cell"},[n("select",{attrs:{selected:""},domProps:{value:e.apertureType},on:{change:function(t){return e.changeApertureType(t.target.value)}}},[n("option",{attrs:{value:"point"}},[e._v("Point")]),n("option",{attrs:{value:"circle"}},[e._v("Circle")]),n("option",{attrs:{value:"ngon"}},[e._v("Polygon")])])]),n("div",{staticClass:"settings-cell settings-label",class:{"settings-label-disabled":!e.hasApertureRadius}},[e._v("\n      Aperture Radius\n    ")]),n("div",{staticClass:"settings-cell"},[n("vue-slider",{attrs:{min:0,max:1,disabled:!e.hasApertureRadius,tooltip:"none",interval:.001,value:e.apertureRadius,contained:"true"},on:{change:e.changeApertureRadius,dragging:e.changeApertureRadius}})],1),n("div",{staticClass:"settings-cell settings-label",class:{"settings-label-disabled":!e.hasApertureRadius}},[e._v("\n      Focal Distance\n    ")]),n("div",{staticClass:"settings-cell"},[n("vue-slider",{attrs:{min:.01,max:100,disabled:!e.hasApertureRadius,tooltip:"none",interval:.001,value:e.focalDistance,contained:"true"},on:{change:e.changeFocalDistance,dragging:e.changeFocalDistance}})],1),n("div",{staticClass:"settings-cell settings-label",class:{"settings-label-disabled":!e.isPolygonAperture}},[e._v("\n      Aperture Rotation\n    ")]),n("div",{staticClass:"settings-cell"},[n("vue-slider",{attrs:{min:0,max:6.2832,disabled:!e.isPolygonAperture,tooltip:"none",interval:1e-4,value:e.apertureRotation,contained:"true"},on:{change:e.changeApertureRotation,dragging:e.changeApertureRotation}})],1),n("div",{staticClass:"settings-cell settings-label",class:{"settings-label-disabled":!e.isPolygonAperture}},[e._v("\n      Aperture Sides\n    ")]),n("div",{staticClass:"settings-cell"},[n("vue-slider",{attrs:{min:3,max:12,disabled:!e.isPolygonAperture,tooltip:"none",interval:1,adsorb:!0,value:e.apertureSides,contained:"true"},on:{change:e.changeApertureSides,dragging:e.changeApertureSides}})],1),n("div",{staticClass:"settings-cell settings-label"},[e._v("Lens Flare")]),n("div",{staticClass:"settings-cell"},[n("select",{attrs:{selected:""},domProps:{value:e.lensFlareEnabled?"enabled":"disabled"},on:{change:function(t){return e.changeLensFlareEnabled(t.target.value)}}},[n("option",{attrs:{value:"disabled"}},[e._v("Disabled")]),n("option",{attrs:{value:"enabled"}},[e._v("Enabled")])])]),n("div",{staticClass:"settings-cell settings-label"},[e._v("Aperture Filter")]),n("div",{staticClass:"settings-cell"},[n("select",{attrs:{disabled:!e.lensFlareEnabled,selected:""},domProps:{value:e.apertureFilter},on:{change:function(t){return e.changeApertureFilter(t.target.value)}}},e._l(e.APERTURE_FILTERS,(function(t){return n("option",{key:t.data,domProps:{value:t.data}},[e._v(e._s(t.name))])})),0)]),n("div",{staticClass:"settings-cell settings-label"},[e._v("Aperture Filter Tile Size")]),n("div",{staticClass:"settings-cell"},[n("select",{attrs:{disabled:!e.lensFlareEnabled,selected:""},domProps:{value:e.apertureFilterTileSize},on:{change:function(t){return e.changeApertureFilterTileSize(t.target.value)}}},[n("option",{attrs:{value:"lowest"}},[e._v("Lowest")]),n("option",{attrs:{value:"low"}},[e._v("Low")]),n("option",{attrs:{value:"medium"}},[e._v("Medium")]),n("option",{attrs:{value:"high"}},[e._v("High")])])])])])},j=[],O=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(l["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.apertureType="point",e.apertureRadius=0,e.apertureSides=5,e.apertureRotation=0,e.focalDistance=0,e.focalCurvature=0,e.fieldOfView=0,e.lensFlareEnabled=!1,e.apertureFilter=null,e.apertureFilterTileSize="low",e.APERTURE_FILTERS=[{name:"Aperture Filter 1",data:"aperture_filter_1.raw"},{name:"Aperture Filter 2",data:"aperture_filter_2.raw"},{name:"Aperture Filter 3",data:"aperture_filter_3.raw"}],e}return Object(p["a"])(t,e),Object(u["a"])(t,[{key:"changeApertureType",value:function(e){this.apertureType=e,this.update()}},{key:"changeLensFlareEnabled",value:function(e){this.lensFlareEnabled="enabled"===e,this.lensFlareEnabled&&null===this.apertureFilter&&(this.apertureFilter=this.APERTURE_FILTERS[0].data),this.update()}},{key:"changeApertureFilter",value:function(e){this.apertureFilter=e,this.update()}},{key:"changeApertureFilterTileSize",value:function(e){this.apertureFilterTileSize=e,this.update()}},{key:"changeApertureRadius",value:function(e){this.apertureRadius=e,this.update()}},{key:"changeFocalDistance",value:function(e){this.focalDistance=e,this.update()}},{key:"changeApertureRotation",value:function(e){this.apertureRotation=e,this.update()}},{key:"changeApertureSides",value:function(e){this.apertureSides=e,this.update()}},{key:"changeFocalCurvature",value:function(e){this.focalCurvature=e,this.update()}},{key:"changeFieldOfView",value:function(e){this.fieldOfView=e,this.update()}},{key:"created",value:function(){var e=this.getSceneData(),t=Object(o["a"])(e,4),n=(t[0],t[1]),a=t[2],r=t[3];switch(this.apertureType=n.aperture.type,n.aperture.type){case"circle":this.apertureRadius=n.aperture.radius;break;case"ngon":this.apertureRadius=n.aperture.radius,this.apertureSides=n.aperture.sides,this.apertureRotation=n.aperture.rotation;break}this.focalDistance=n.focal_distance,this.focalCurvature=n.focal_curvature,this.fieldOfView=n.field_of_view,this.lensFlareEnabled=r.lens_flare_enabled,this.apertureFilter=a?a.filter:null,this.apertureFilterTileSize=a?a.tile_size:"low"}},{key:"update",value:function(){var e=this.getSceneData(),t=Object(o["a"])(e,4),n=t[0],a=t[1],r=(t[2],t[3]);switch(a.aperture.type=this.apertureType,a.aperture.type){case"circle":a.aperture.radius=this.apertureRadius;break;case"ngon":a.aperture.radius=this.apertureRadius,a.aperture.sides=this.apertureSides,a.aperture.rotation=this.apertureRotation;break}a.focal_distance=this.focalDistance,a.focal_curvature=this.focalCurvature,a.field_of_view=this.fieldOfView,r.lens_flare_enabled=this.lensFlareEnabled,null===this.apertureFilter?n.aperture=null:n.aperture={filter:this.apertureFilter,tile_size:this.apertureFilterTileSize},this.scene.set_json(n)}},{key:"getSceneData",value:function(){var e=this.scene.json();return[e,e.camera,e.aperture,e.display]}},{key:"hasApertureRadius",get:function(){return"point"!==this.apertureType}},{key:"isPolygonAperture",get:function(){return"ngon"===this.apertureType}}]),t}(h["c"]);Object(b["a"])([Object(h["b"])()],O.prototype,"scene",void 0),O=Object(b["a"])([h["a"]],O);var E=O,C=E,S=(n("09e7"),Object(y["a"])(C,k,j,!1,null,"0c3977e2",null)),T=S.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("header",{staticClass:"container-header header-above"},[n("ul",{staticClass:"tab-heads"},e._l(e.tabsAbove,(function(t){return n("li",{key:t,staticClass:"tab-head above",class:{"tab-head--active":e.activeTab===t},on:{click:function(n){return e.switchTab(t)}}},[e._t("tab-head-"+t,[e._v(e._s(t))])],2)})),0)]),n("main",{staticClass:"container-body"},[e._t("tab-panel-"+this.activeTab)],2),n("header",{staticClass:"container-header header-below"},[n("ul",{staticClass:"tab-heads"},e._l(e.tabsBelow,(function(t){return n("li",{key:t,staticClass:"tab-head below",class:{"tab-head--active":e.activeTab===t},on:{click:function(n){return e.switchTab(t)}}},[e._t("tab-head-"+t,[e._v(e._s(t))])],2)})),0)])])},F=[],A=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(l["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.activeTab=e.defaultTab,e}return Object(p["a"])(t,e),Object(u["a"])(t,[{key:"switchTab",value:function(e){this.activeTab=e}}]),t}(h["c"]);Object(b["a"])([Object(h["b"])()],A.prototype,"tabsAbove",void 0),Object(b["a"])([Object(h["b"])()],A.prototype,"tabsBelow",void 0),Object(b["a"])([Object(h["b"])()],A.prototype,"defaultTab",void 0),A=Object(b["a"])([h["a"]],A);var P=A,L=P,M=(n("d43b"),Object(y["a"])(L,R,F,!1,null,"5fdbfb9c",null)),I=M.exports,D=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},B=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Equinox Renderer")]),n("p",[e._v("\n    This is a WebGL2 real-time stochastic photon mapper implemented using Rust\n    WebAssembly. Like path tracing, it is progressive, meaning that the render\n    starts out noisy and gradually improves over time, and it can produce\n    highly accurate and pleasing images.\n  ")]),n("h3",[e._v("Quick Start")]),n("p",[e._v("\n    The application is divided into two panels, with the render output on one\n    side and editing controls on the other. The editing controls are divided\n    into tabs which each allow editing some aspect of the scene. Each scene\n    also contains a camera from the perspective of which an image is rendered.\n    To control the camera, hold down the left or right mouse button and use\n    the mouse and keyboard:\n  ")]),n("table",{staticStyle:{width:"100%"}},[n("tr",[n("td",[e._v("Reorient the camera")]),n("td",[e._v("Mouse movement (FPS-like)")])]),n("tr",[n("td",[e._v("Reposition the camera")]),n("td",[e._v("WASD, Q (up), Z (down)")])]),n("tr",[n("td",[e._v("Adjust movement speed")]),n("td",[e._v("Scroll Wheel")])])]),n("p",[e._v("\n    A default scene with a few objects in it has been configured. Explore the\n    editing options using this scene (a good starting point is to set an\n    environment map for more interesting lighting) or load another scene.\n  ")])])}],z=function(e){function t(){return Object(c["a"])(this,t),Object(l["a"])(this,Object(d["a"])(t).apply(this,arguments))}return Object(p["a"])(t,e),t}(h["c"]);z=Object(b["a"])([h["a"]],z);var K=z,N=K,q=Object(y["a"])(N,D,B,!1,null,"5934845b",null),U=q.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"attribution"},[n("p",[e._v(e._s(e.version))]),n("hr"),e._m(0),n("hr")]),n("div",{staticClass:"licensing"},[n("pre",[e._v(e._s(e.licensing))])])])},$=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("\n      All environment maps from\n      "),n("a",{attrs:{href:"https://hdrihaven.com/"}},[e._v("HDRI Haven")]),e._v(" and most textures from\n      "),n("a",{attrs:{href:"https://texturehaven.com/"}},[e._v("Texture Haven")]),e._v(".\n    ")])}],W=function(e){function t(){return Object(c["a"])(this,t),Object(l["a"])(this,Object(d["a"])(t).apply(this,arguments))}return Object(p["a"])(t,e),t}(h["c"]);Object(b["a"])([Object(h["b"])()],W.prototype,"licensing",void 0),Object(b["a"])([Object(h["b"])()],W.prototype,"version",void 0),W=Object(b["a"])([h["a"]],W);var G=W,J=G,X=(n("d7e8"),Object(y["a"])(J,V,$,!1,null,"9f29f3ae",null)),H=X.exports,Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"root"},[e._m(0),n("hr"),n("textarea",{ref:"editor"}),n("div",{staticClass:"log"},[n("p",{staticClass:"error"},[e._v(e._s(e.error))])])])},Y=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[n("b",[e._v("Note")]),e._v(": any camera interaction performed while this editor is open\n      will be rolled back on any change to the scene JSON; the JSON will not\n      update automatically.\n    ")])])}],Z=n("56b3"),ee=n.n(Z),te=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(l["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.error="",e}return Object(p["a"])(t,e),Object(u["a"])(t,[{key:"mounted",value:function(){var e=this,t=ee.a.fromTextArea(this.$refs.editor,{mode:"application/json",gutters:["CodeMirror-lint-markers"],lineNumbers:!0,tabSize:2,theme:"monokai",lint:!0});t.on("change",(function(){e.onJsonChange(t.getValue())})),t.setValue(JSON.stringify(this.scene.json(),null,2)),t.clearHistory()}},{key:"onJsonChange",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=this.validateJson(t),null!==n&&(a=this.updateScene(n),this.error=null!==a?a:"");case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"validateJson",value:function(e){try{return JSON.parse(e)}catch(t){return this.error="JSON syntax error",null}}},{key:"updateScene",value:function(e){try{return this.scene.set_json(e),null}catch(t){return t.message}}}]),t}(h["c"]);Object(b["a"])([Object(h["b"])()],te.prototype,"scene",void 0),te=Object(b["a"])([h["a"]],te);var ne=te,ae=ne,re=(n("2bef"),n("eabb"),Object(y["a"])(ae,Q,Y,!1,null,"a86aa15a",null)),se=re.exports,ie=n("a002"),oe=n.n(ie),ce=n("d7ac"),ue=n.n(ce),le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("canvas",{ref:"canvas",staticClass:"canvas",class:{"canvas-locked":e.isCameraLocked||e.isRenderPaused},style:e.canvasStyle,attrs:{tabindex:"0"},on:{mousedown:function(t){return e.enterCapture()},mouseup:function(t){return e.leaveCapture()},mouseleave:function(t){return e.leaveCapture()},mousemove:function(t){return e.moveCamera(t)},wheel:function(t){return e.onMouseWheel(t.deltaY)},keydown:function(t){return e.pressKey(t.key)},keyup:function(t){return e.releaseKey(t.key)},keypress:function(t){return e.onKeyPress(t)},contextmenu:function(e){return e.preventDefault()}}}),n("CanvasOverlay",{attrs:{"assets-in-flight":e.assetsInFlight,"is-expensive-update":e.isExpensiveUpdate,"error-message":e.updateError}}),e.showStatusBar?n("StatusBar",{staticClass:"status-bar",attrs:{"sppm-passes":e.sppmPasses,"sppm-photons":e.sppmPhotons,"is-context-lost":e.isContextLost,width:e.canvasWidth,height:e.canvasHeight,vendor:e.contextVendor,renderer:e.contextRenderer,cpuFrameTime:e.cpuFrameTime,gpuFrameTime:e.gpuFrameTime,syncInterval:e.syncInterval}}):e._e(),n("Toolbar",{attrs:{"on-save-render":e.onSaveRender,"on-toggle-fullscreen":e.toggleFullscreen,"is-camera-locked":e.isCameraLocked,"is-render-paused":e.isRenderPaused,"is-saving-render":e.isSavingRender},on:{"camera-lock":function(t){return e.toggleCameraLock()},"render-pause":function(t){return e.toggleRenderPause()}}})],1)},de=[],pe=(n("7f7f"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"status"},[n("div",{staticClass:"frame-rate"},[n("pre",[n("p",[e._v(e._s(e.frameRate))])])]),n("div",{staticClass:"resolution"},[n("pre",[n("p",[e._v(e._s(e.width)+"×"+e._s(e.height))])])]),n("div",{staticClass:"pass-info"},[n("pre",[n("p",[e._v(e._s(e.passInfo))])])]),n("div",{staticClass:"frame-cpu-time"},[n("pre",[n("p",[e._v(e._s(e.cpuFrameInfo))])])]),n("div",{staticClass:"frame-gpu-time"},[n("pre",[n("p",[e._v(e._s(e.gpuFrameInfo))])])]),n("div",{staticClass:"device-info"},[n("pre",[n("p",[e._v(e._s(e.renderer)+" ("+e._s(e.vendor)+")")])])])])}),be=[];n("f576");function he(e){return e<=.099?"".concat((1e3*e).toFixed(0).padStart(4," ")," μs"):"".concat(e<=99?e.toFixed(1).padStart(4," "):e.toFixed(0).padStart(4," ")," ms")}function ve(e){return 1===e?"1 photon":e<1e3?"".concat(e," photons"):e<1e6?"".concat((e/1e3).toFixed(1),"K photons"):e<1e9?"".concat((e/1e6).toFixed(1),"M photons"):e<1e12?"".concat((e/1e9).toFixed(1),"B photons"):"".concat((e/1e12).toFixed(1),"T photons")}var fe=function(e){function t(){return Object(c["a"])(this,t),Object(l["a"])(this,Object(d["a"])(t).apply(this,arguments))}return Object(p["a"])(t,e),Object(u["a"])(t,[{key:"passInfo",get:function(){return this.isContextLost?"CONTEXT LOST!":1===this.sppmPasses?"1 pass, ".concat(ve(this.sppmPhotons)):"".concat(this.sppmPasses," passes, ").concat(ve(this.sppmPhotons))}},{key:"frameRate",get:function(){return null===this.syncInterval?"-- FPS":"".concat((1e3/this.syncInterval).toFixed(0)," FPS")}},{key:"cpuFrameInfo",get:function(){return null===this.cpuFrameTime?"CPU time:   N/A  ":"CPU time: ".concat(he(1e3*this.cpuFrameTime))}},{key:"gpuFrameInfo",get:function(){return null===this.gpuFrameTime?"GPU time:   N/A  ":"GPU time: ".concat(he(1e3*this.gpuFrameTime))}}]),t}(h["c"]);Object(b["a"])([Object(h["b"])()],fe.prototype,"width",void 0),Object(b["a"])([Object(h["b"])()],fe.prototype,"height",void 0),Object(b["a"])([Object(h["b"])()],fe.prototype,"sppmPasses",void 0),Object(b["a"])([Object(h["b"])()],fe.prototype,"sppmPhotons",void 0),Object(b["a"])([Object(h["b"])()],fe.prototype,"vendor",void 0),Object(b["a"])([Object(h["b"])()],fe.prototype,"renderer",void 0),Object(b["a"])([Object(h["b"])()],fe.prototype,"isContextLost",void 0),Object(b["a"])([Object(h["b"])()],fe.prototype,"cpuFrameTime",void 0),Object(b["a"])([Object(h["b"])()],fe.prototype,"gpuFrameTime",void 0),Object(b["a"])([Object(h["b"])()],fe.prototype,"syncInterval",void 0),fe=Object(b["a"])([h["a"]],fe);var me=fe,_e=me,ge=(n("053e"),Object(y["a"])(_e,pe,be,!1,null,"0ef3fcda",null)),ye=ge.exports,xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"toolbar"},[n("div",{staticClass:"toolbar-item",attrs:{title:"Toggle fullscreen mode"},on:{click:function(t){return e.onToggleFullscreen()}}},[n("font-awesome-icon",{staticClass:"toolbar-icon",attrs:{icon:"expand",size:"2x"}})],1),n("div",{staticClass:"toolbar-item",attrs:{title:"Save the current render"},on:{click:function(t){return e.onSaveRender()}}},[e.isSavingRender?e._e():n("font-awesome-icon",{staticClass:"toolbar-icon",attrs:{icon:"download",size:"2x"}}),e.isSavingRender?n("font-awesome-icon",{staticClass:"toolbar-icon",attrs:{icon:"cog",spin:"",size:"2x"}}):e._e()],1),e.isRenderPaused?e._e():n("div",{staticClass:"toolbar-item",attrs:{title:"Pause the render"},on:{click:function(t){return e.toggleRenderPause()}}},[n("font-awesome-icon",{staticClass:"toolbar-icon",attrs:{icon:"pause",size:"2x"}})],1),e.isRenderPaused?n("div",{staticClass:"toolbar-item",attrs:{title:"Resume the render"},on:{click:function(t){return e.toggleRenderPause()}}},[n("font-awesome-icon",{staticClass:"toolbar-icon",attrs:{icon:"play",size:"2x"}})],1):e._e(),e.isCameraLocked?e._e():n("div",{staticClass:"toolbar-item",attrs:{title:"Lock the camera"},on:{click:function(t){return e.toggleCameraLock()}}},[n("font-awesome-icon",{staticClass:"toolbar-icon",attrs:{icon:"unlock",size:"2x"}})],1),e.isCameraLocked?n("div",{staticClass:"toolbar-item",attrs:{title:"Unlock the camera"},on:{click:function(t){return e.toggleCameraLock()}}},[n("font-awesome-icon",{staticClass:"toolbar-icon",attrs:{icon:"lock",size:"2x"}})],1):e._e()])},we=[],ke=function(e){function t(){return Object(c["a"])(this,t),Object(l["a"])(this,Object(d["a"])(t).apply(this,arguments))}return Object(p["a"])(t,e),Object(u["a"])(t,[{key:"toggleCameraLock",value:function(){this.$emit("camera-lock")}},{key:"toggleRenderPause",value:function(){this.$emit("render-pause")}}]),t}(h["c"]);Object(b["a"])([Object(h["b"])()],ke.prototype,"onToggleFullscreen",void 0),Object(b["a"])([Object(h["b"])()],ke.prototype,"onSaveRender",void 0),Object(b["a"])([Object(h["b"])()],ke.prototype,"isSavingRender",void 0),Object(b["a"])([Object(h["b"])()],ke.prototype,"isCameraLocked",void 0),Object(b["a"])([Object(h["b"])()],ke.prototype,"isRenderPaused",void 0),ke=Object(b["a"])([h["a"]],ke);var je=ke,Oe=je,Ee=(n("6a2f"),Object(y["a"])(Oe,xe,we,!1,null,"dbe322e4",null)),Ce=Ee.exports,Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["error"===e.overlayType?n("div",{staticClass:"overlay"},[n("font-awesome-icon",{staticClass:"icon error",attrs:{icon:"exclamation-triangle",size:"lg"}}),n("p",{staticClass:"error"},[e._v(e._s(e.errorMessage))])],1):e._e(),"download"===e.overlayType?n("div",{staticClass:"overlay info"},[n("font-awesome-icon",{staticClass:"icon",attrs:{icon:"circle-notch",spin:"",size:"lg"}}),n("p",{staticClass:"info"},[e._v(e._s(e.downloadText))])],1):e._e(),"update"===e.overlayType?n("div",{staticClass:"overlay info"},[n("font-awesome-icon",{staticClass:"icon",attrs:{icon:"exclamation-circle",size:"lg"}}),n("p",{staticClass:"info"},[e._v("Updating scene...")])],1):e._e()])},Te=[],Re=function(e){function t(){return Object(c["a"])(this,t),Object(l["a"])(this,Object(d["a"])(t).apply(this,arguments))}return Object(p["a"])(t,e),Object(u["a"])(t,[{key:"overlayType",get:function(){return null!==this.errorMessage?"error":0!==this.assetsInFlight?"download":this.isExpensiveUpdate?"update":null}},{key:"downloadText",get:function(){return this.assetsInFlight>1?"Downloading ".concat(this.assetsInFlight," assets"):"Downloading 1 asset"}}]),t}(h["c"]);Object(b["a"])([Object(h["b"])()],Re.prototype,"assetsInFlight",void 0),Object(b["a"])([Object(h["b"])()],Re.prototype,"isExpensiveUpdate",void 0),Object(b["a"])([Object(h["b"])()],Re.prototype,"errorMessage",void 0),Re=Object(b["a"])([h["a"]],Re);var Fe=Re,Ae=Fe,Pe=(n("850f"),Object(y["a"])(Ae,Se,Te,!1,null,"e4544f5c",null)),Le=Pe.exports,Me=n("7c39"),Ie=n.n(Me),De=n("21a6"),Be=n.n(De);function ze(e){var t=e.getExtension("WEBGL_debug_renderer_info"),n=e.getParameter(e.VENDOR);return null===t?n:e.getParameter(t.UNMASKED_VENDOR_WEBGL)||n}function Ke(e){var t=e.getExtension("WEBGL_debug_renderer_info"),n=e.getParameter(e.RENDERER);return null===t?n:e.getParameter(t.UNMASKED_RENDERER_WEBGL)||n}var Ne=function(){function e(t){var n=this;Object(c["a"])(this,e),this.context=t,this.pending=[],this.running=[],this.extension=t.getExtension("EXT_disjoint_timer_query_webgl2"),this.context.canvas.addEventListener("webglcontextrestored",(function(){n.extension=t.getExtension("EXT_disjoint_timer_query_webgl2")}))}return Object(u["a"])(e,[{key:"clear",value:function(){this.pending.length=0,this.running.length=0,this.extension=null}},{key:"timeElapsed",value:function(e){if(null===this.extension)return e(),null;var t=this.pending.shift()||this.context.createQuery();if(null===t)return e(),null;if(this.context.beginQuery(this.extension.TIME_ELAPSED_EXT,t),e(),this.context.endQuery(this.extension.TIME_ELAPSED_EXT),this.running.push(t),this.running.length<2)return null;var n=this.running[0],a=this.context.getQueryParameter(n,this.context.QUERY_RESULT_AVAILABLE)||!1;if(a&&!this.context.getParameter(this.extension.GPU_DISJOINT_EXT)){var r=this.context.getQueryParameter(n,this.context.QUERY_RESULT);return this.pending.push(this.running.shift()),r/1e9}return null}}]),e}(),qe=(n("c5f6"),function(){function e(t){Object(c["a"])(this,e),this.window=t,this.samples=[]}return Object(u["a"])(e,[{key:"addSample",value:function(e){this.samples.push(e);while(this.samples.length>this.window)this.samples.shift()}},{key:"minimum",value:function(){var e=Number.POSITIVE_INFINITY,t=!0,n=!1,a=void 0;try{for(var r,s=this.samples[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var i=r.value;if(null===i)return null;e=Math.min(e,i)}}catch(o){n=!0,a=o}finally{try{t||null==s.return||s.return()}finally{if(n)throw a}}return e}},{key:"average",value:function(){var e=0,t=!0,n=!1,a=void 0;try{for(var r,s=this.samples[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var i=r.value;if(null===i)return null;e+=i}}catch(o){n=!0,a=o}finally{try{t||null==s.return||s.return()}finally{if(n)throw a}}return e/this.samples.length}}]),e}()),Ue=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(l["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.isExpensiveUpdate=!1,e.updateError=null,e.animationFrame=null,e.showStatusBar=!0,e.canvasStyle="",e.keys={},e.theta=Math.PI/2,e.phi=-Math.PI/2,e.thetaChange=0,e.phiChange=0,e.movementSpeed=.1,e.mouseMoved=!1,e.thetaEstimator=new qe(10),e.phiEstimator=new qe(10),e.lastMouseX=0,e.lastMouseY=0,e.captured=!1,e.cpuFrameTimeEstimator=new qe(30),e.gpuFrameTimeEstimator=new qe(30),e.syncIntervalEstimator=new qe(30),e.cpuFrameTime=null,e.gpuFrameTime=null,e.syncInterval=null,e.gpuTimeQueries=null,e.extension=null,e.isContextLost=!1,e.mustSaveRender=!1,e.isSavingRender=!1,e.screenshot=null,e.isSceneSaveRequested=!1,e.isCameraLocked=!1,e.isRenderPaused=!1,e.canvas=null,e.context=null,e.canvasWidth=0,e.canvasHeight=0,e.sppmPhotons=0,e.sppmPasses=0,e.lastVsync=0,e}return Object(p["a"])(t,e),Object(u["a"])(t,[{key:"mounted",value:function(){var e=this,t=this.$refs.canvas;this.canvas=t,this.context=t.getContext("webgl2",{alpha:!1,antialias:!1,depth:!1,premultipliedAlpha:!1,stencil:!1,powerPreference:"high-performance",preserveDrawingBuffer:!1}),this.extension=this.context.getExtension("WEBGL_lose_context"),null===this.context&&alert("Sorry, your browser does not appear to support WebGL2!"),this.gpuTimeQueries=new Ne(this.context),this.canvas.addEventListener("webglcontextlost",(function(t){e.gpuTimeQueries.clear(),e.clearAssets(),e.device.context_lost(),t.preventDefault()})),this.device=new this.equinox.WebDevice(this.context),this.$emit("device-created",this.device),"None"===this.device.texture_compression()&&alert("Your device or browser does not support compressed textures, some features may not work!"),this.canvas.focus(),this.animationFrame=requestAnimationFrame(this.renderLoop),this.$root.$on("save-scene-request",(function(){e.isSceneSaveRequested=!0}))}},{key:"resizeAndMaintainAspectRatio",value:function(){var e=this.$el.clientWidth,t=this.$el.clientHeight;if(0!==e&&0!==t){var n=this.canvas.width,a=this.canvas.height,r=n/e,s=a/t;this.canvasStyle=r<s?"\n        width: ".concat(Math.max(1,n/s),"px;\n        transform: translateX(-50%); left: 50%;\n\n        height: 100%;\n      "):"\n        height: ".concat(Math.max(1,a/r),"px;\n        transform: translateY(-50%); top: 50%;\n\n        width:  100%;\n      ")}}},{key:"toggleFullscreen",value:function(){null===document.fullscreenElement?this.$el.requestFullscreen():document.exitFullscreen()}},{key:"toggleCameraLock",value:function(){this.isCameraLocked=!this.isCameraLocked}},{key:"toggleRenderPause",value:function(){this.isRenderPaused=!this.isRenderPaused}},{key:"onSaveRender",value:function(){this.mustSaveRender=!0}},{key:"loseContext",value:function(){null!==this.extension&&this.extension.loseContext()}},{key:"restoreContext",value:function(){null!==this.extension&&this.extension.restoreContext()}},{key:"pressKey",value:function(e){"r"!==e?this.captured&&(this.keys[e]=!0):this.keys["r"]=!0}},{key:"saveScreenshot",value:function(){this.mustSaveRender=!0}},{key:"releaseKey",value:function(e){delete this.keys[e]}},{key:"moveCamera",value:function(e){var t=this.canvas.getBoundingClientRect();if(this.lastMouseX=e.clientX-t.x,this.lastMouseY=e.clientY-t.y,this.captured&&(0!==e.movementX||0!==e.movementY)){if(!this.mouseMoved){var n=this.scene.json().camera.direction;this.phi=Math.atan2(n[2],n[0]),this.theta=Math.acos(n[1])}this.phiChange+=.001*-e.movementX,this.thetaChange+=.001*e.movementY,this.mouseMoved=!0}}},{key:"enterCapture",value:function(){null!==this.canvas&&(this.canvas.requestPointerLock(),this.captured=!0)}},{key:"leaveCapture",value:function(){null!==this.canvas&&(document.exitPointerLock(),this.captured=!1,this.keys={})}},{key:"onKeyPress",value:function(e){e.shiftKey&&"K"===e.key&&null!==this.extension&&this.extension.loseContext(),e.shiftKey&&"L"===e.key&&null!==this.extension&&this.extension.restoreContext(),e.shiftKey&&"O"===e.key&&(this.showStatusBar=!this.showStatusBar)}},{key:"onMouseWheel",value:function(e){this.movementSpeed*=Math.pow(1.1,e/64)}},{key:"performDeviceUpdate",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isContextLost){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.loadAssets(this.scene.assets(),this.device.texture_compression());case 4:this.device.update(this.scene,this.getAsset);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"renderLoop",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,s,i,o,c,u,l,d,p,b,h,v=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=performance.now(),0!==this.lastVsync&&this.syncIntervalEstimator.addSample(t-this.lastVsync),this.lastVsync=t,null===this.canvas||null===this.context||0==this.canvas.clientWidth||0==this.canvas.clientHeight){e.next=52;break}if(this.isContextLost=this.context.isContextLost(),n=0,a=0,r=0,this.keys["w"]&&(n+=1),this.keys["s"]&&(n-=1),this.keys["a"]&&(a-=1),this.keys["d"]&&(a+=1),this.keys["q"]&&(r+=1),this.keys["z"]&&(r-=1),0==n&&0==r&&0==a||this.scene.move_camera(a*this.movementSpeed,r*this.movementSpeed,n*this.movementSpeed),this.thetaEstimator.addSample(this.thetaChange),this.phiEstimator.addSample(this.phiChange),this.thetaChange=0,this.phiChange=0,this.mouseMoved&&(this.theta+=this.thetaEstimator.average(),this.phi+=this.phiEstimator.average(),this.theta>Math.PI-.01&&(this.theta=Math.PI-.01),this.theta<.01&&(this.theta=.01),s=Math.sin(this.theta)*Math.cos(this.phi),i=Math.sin(this.theta)*Math.sin(this.phi),o=Math.cos(this.theta),this.scene.set_camera_direction(s,o,i),this.mouseMoved=!1),c=this.scene.json(),this.keys["r"]?(u=Math.round(this.lastMouseX/this.canvas.clientWidth*c.raster.width),l=Math.round((1-this.lastMouseY/this.canvas.clientHeight)*c.raster.height),d=Math.max(0,u-25),p=Math.max(0,l-25),c.display.render_region=[d,p,50,50]):c.display.render_region=null,this.scene.set_json(c),this.sppmPhotons=this.device.sppm_photons(),this.sppmPasses=this.device.sppm_passes(),e.prev=25,this.isRenderPaused){e.next=40;break}if(!this.isExpensiveUpdate){e.next=33;break}return e.next=30,this.performDeviceUpdate();case 30:this.isExpensiveUpdate=!1,e.next=39;break;case 33:if(!this.device.is_expensive_update(this.scene)){e.next=37;break}this.isExpensiveUpdate=!0,e.next=39;break;case 37:return e.next=39,this.performDeviceUpdate();case 39:this.updateError=null;case 40:!this.isRenderPaused&&this.isExpensiveUpdate||(this.canvas.width=this.scene.raster_width(),this.canvas.height=this.scene.raster_height(),this.resizeAndMaintainAspectRatio(),this.canvasWidth=this.canvas.width,this.canvasHeight=this.canvas.height),b=this.gpuTimeQueries.timeElapsed((function(){v.isRenderPaused||v.device.refine()})),this.device.present(),this.mustSaveRender&&(this.generateScreenshotZip(),this.mustSaveRender=!1),this.isSceneSaveRequested&&(this.performSceneSave(),this.isSceneSaveRequested=!1),this.gpuFrameTimeEstimator.addSample(b),e.next=52;break;case 48:e.prev=48,e.t0=e["catch"](25),this.updateError=e.t0.message,this.isRenderPaused=!0;case 52:h=(performance.now()-t)/1e3,this.cpuFrameTimeEstimator.addSample(h),this.cpuFrameTime=this.cpuFrameTimeEstimator.minimum(),this.gpuFrameTime=this.gpuFrameTimeEstimator.minimum(),this.syncInterval=this.syncIntervalEstimator.average(),this.animationFrame=requestAnimationFrame(this.renderLoop);case 58:case"end":return e.stop()}}),e,this,[[25,48]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"generateScreenshotZip",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isSavingRender=!0,e.prev=1,t=new Ie.a,n=new Promise((function(e){r.canvas.toBlob((function(t){return e(t)}))})),a={sppm_passes:this.device.sppm_passes(),sppm_photons:this.device.sppm_photons(),vendor:this.contextVendor,renderer:this.contextRenderer,version:this.equinox.version()},t.file("scene.json",JSON.stringify(this.scene.json(),null,2)),t.file("meta.json",JSON.stringify(a,null,2)),e.t0=t,e.next=10,n;case 10:return e.t1=e.sent,e.t0.file.call(e.t0,"render.png",e.t1),e.t2=Be.a,e.next=15,t.generateAsync({type:"blob"});case 15:e.t3=e.sent,e.t2.saveAs.call(e.t2,e.t3,"render.zip");case 17:return e.prev=17,this.isSavingRender=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[1,,17,20]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"performSceneSave",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,s,i,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.scene.json(),n=this.scene.name(),a=320,r=180,s=this.resizeToRatio(this.canvas.width,this.canvas.height,a,r),i=Object(o["a"])(s,2),c=i[0],u=i[1],this.$root.$emit("save-scene-response",n,t,this.createThumbnail(this.canvas,c,u));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"resizeToRatio",value:function(e,t,n,a){var r=e/n,s=t/a;return r<s?[e/s,a]:[n,t/r]}},{key:"createThumbnail",value:function(e,t,n){var a=document.createElement("canvas"),r=e.width,s=e.height;a.width=r,a.height=s,a.getContext("2d").drawImage(e,0,0);while(r/2>=t&&s/2>=n){var i=document.createElement("canvas");i.width=r/2,i.height=s/2,i.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,r/2,s/2),a=i,r/=2,s/=2}if(t!=r&&n!=s){var o=document.createElement("canvas");o.width=t,o.height=n,o.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,t,n),a=o}return a.toDataURL("image/jpeg",.9)}},{key:"contextVendor",get:function(){return null===this.context?"unknown":ze(this.context)}},{key:"contextRenderer",get:function(){return null===this.context?"unknown":Ke(this.context)}}]),t}(h["c"]);Object(b["a"])([Object(h["b"])()],Ue.prototype,"equinox",void 0),Object(b["a"])([Object(h["b"])()],Ue.prototype,"scene",void 0),Object(b["a"])([Object(h["b"])()],Ue.prototype,"assetsInFlight",void 0),Object(b["a"])([Object(h["b"])()],Ue.prototype,"loadAssets",void 0),Object(b["a"])([Object(h["b"])()],Ue.prototype,"clearAssets",void 0),Object(b["a"])([Object(h["b"])()],Ue.prototype,"getAsset",void 0),Ue=Object(b["a"])([Object(h["a"])({components:{CanvasOverlay:Le,StatusBar:ye,Toolbar:Ce}})],Ue);var Ve=Ue,$e=Ve,We=(n("b2b4"),Object(y["a"])($e,le,de,!1,null,"4d4986f0",null)),Ge=We.exports,Je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"scene-list"},[n("div",{staticClass:"scene-card"},[n("button",{staticClass:"button",attrs:{title:"Save the current scene"},on:{click:function(t){return e.requestSceneSave()}}},[n("div",{staticClass:"save-icon"},[n("font-awesome-icon",{attrs:{icon:"hdd",size:"2x"}})],1)])]),e._l(e.displayScenes,(function(t){return n("div",{key:t.name,staticClass:"scene-card"},[n("button",{staticClass:"button scene-name-container",style:"background-image: url("+t.thumbnail+")",on:{click:function(n){return e.loadScene(t.name)}}},[n("div",{staticClass:"scene-name"},[e._v(e._s(t.name))])]),n("div",{staticClass:"delete-scene",on:{click:function(n){return e.deleteScene(t.name)}}},[n("font-awesome-icon",{staticClass:"delete-icon",attrs:{icon:"trash",size:"lg"}})],1)])}))],2)},Xe=[],He=(n("55dd"),{name:"[Prefab] Glass Thickness",json:{metadata:{name:"[Prefab] Glass Thickness"},camera:{position:[-13.5,1.5,0],direction:[1,0,0],up_vector:[0,1,0],aperture:{type:"circle",radius:0},focal_distance:1,focal_curvature:0,field_of_view:.2},raster:{width:1280,height:720,filter:{type:"blackman-harris"}},instance_list:{glass1:{geometry:"box",material:"glass",parameters:{length:0,x:-1,y:1,z:3},sample_explicit:!0,visible:!0,medium:{extinction:[3e-8,3e-8,3e-8],refractive_index:1.55},parent:null},glass2:{geometry:"box",material:"glass",parameters:{length:.5,x:-.5,y:1,z:1},sample_explicit:!0,visible:!0,medium:{extinction:[3e-8,3e-8,3e-8],refractive_index:1.55},parent:null},glass3:{geometry:"box",material:"glass",parameters:{length:1,x:0,y:1,z:-1},sample_explicit:!0,visible:!0,medium:{extinction:[3e-8,3e-8,3e-8],refractive_index:1.55},parent:null},glass4:{geometry:"box",material:"glass",parameters:{length:2,x:1,y:1,z:-3},sample_explicit:!0,visible:!0,medium:{extinction:[3e-8,3e-8,3e-8],refractive_index:1.55},parent:null},ground:{geometry:"ground",material:"lambertian",parameters:{},sample_explicit:!0,visible:!0,medium:{extinction:[0,0,0],refractive_index:1},parent:null}},geometry_list:{box:{type:"translate",translation:["x","y","z"],child:{type:"round",radius:.03,child:{type:"cuboid",dimensions:["length",.5,.5]}}},ground:{type:"cuboid",dimensions:[4,.01,4]}},material_list:{glass:{type:"dielectric",base_color:[1,1,1],roughness:0},lambertian:{type:"lambertian",albedo:[.7,.7,.7]}},environment_map:"green_point_park_8k.raw",environment:{type:"map",tint:[1,1,1],rotation:3.7133625},display:{exposure:0,saturation:1,lens_flare_enabled:!1,lens_flare_tiles_per_pass:1},aperture:null,integrator:{hash_table_bits:18,photons_per_pass:8e5,max_search_radius:.05,min_search_radius:.0025,alpha:.75,max_scatter_bounces:8,max_gather_bounces:8,geometry_precision:.001,geometry_pushback:5}},thumbnail:"prefab-glass-thickness.jpg",timestamp:""}),Qe={name:"[Prefab] Default Scene",json:{metadata:{name:"[Prefab] Default Scene"},camera:{position:[6.8313575,3.796789,-6.400666],direction:[-.6979423,-.3206336,.64036757],up_vector:[0,1,0],aperture:{type:"circle",radius:0},focal_distance:.01,focal_curvature:0,field_of_view:.2},raster:{width:1280,height:720,filter:{type:"blackman-harris"}},instance_list:{"glass-cylinder":{geometry:"cylinder",material:"glass",parameters:{x:1,y:.955,z:0},sample_explicit:!0,visible:!0,medium:{extinction:[9e-8,5e-8,2e-9],refractive_index:1.45},parent:null},"glass-sphere":{geometry:"sphere",material:"glass",parameters:{x:0,y:1.11,z:-1.5},sample_explicit:!0,visible:!0,medium:{extinction:[1e-8,6e-8,6e-8],refractive_index:1.65},parent:null},ground:{geometry:"ground",material:"lambertian",parameters:{},sample_explicit:!0,visible:!0,medium:{extinction:[0,0,0],refractive_index:1},parent:null},"matte-cube":{geometry:"cube",material:"matte",parameters:{x:-.3,y:.81,z:1.5},sample_explicit:!0,visible:!0,medium:{extinction:[0,0,0],refractive_index:1},parent:null}},geometry_list:{cube:{type:"translate",translation:["x","y","z"],child:{type:"round",radius:.1,child:{type:"cuboid",dimensions:[.699,.699,.699]}}},cylinder:{type:"translate",translation:["x","y","z"],child:{type:"cylinder",height:.799,radius:.4}},ground:{type:"cuboid",dimensions:[3,.01,3]},sphere:{type:"translate",translation:["x","y","z"],child:{type:"sphere",radius:.799}}},material_list:{glass:{type:"dielectric",base_color:[1,1,1],roughness:0},lambertian:{type:"lambertian",albedo:[.5,.5,.5]},matte:{type:"lambertian",albedo:[.25,.75,.25]}},environment_map:null,environment:{type:"solid",tint:[1,1,1]},display:{exposure:0,saturation:1,lens_flare_enabled:!1,lens_flare_tiles_per_pass:1},aperture:null,integrator:{hash_table_bits:18,photons_per_pass:1e5,max_search_radius:.05,min_search_radius:.005,alpha:.7,max_scatter_bounces:3,max_gather_bounces:5,geometry_precision:.001,geometry_pushback:5}},thumbnail:"prefab-default-scene.jpg",timestamp:""},Ye=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(l["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.scenes=new Map,e.store=oe.a.createInstance({driver:oe.a.LOCALSTORAGE,name:"equinox-saved-scenes-v1"}),e}return Object(p["a"])(t,e),Object(u["a"])(t,[{key:"mounted",value:function(){var e=this;this.updateFromStore(),this.$root.$on("save-scene-response",(function(t,n,a){return e.saveScene(t,{json:n,thumbnail:a,timestamp:(new Date).toISOString()})}))}},{key:"saveScene",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.store.setItem(t,n);case 2:return e.next=4,this.updateFromStore();case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"requestSceneSave",value:function(){this.$root.$emit("save-scene-request")}},{key:"deleteScene",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.store.removeItem(t);case 2:return e.next=4,this.updateFromStore();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"loadScene",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.scenes.get(t),void 0!==n){e.next=3;break}throw new Error("scene did not exist");case 3:this.scene.set_json(n.json);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateFromStore",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.store.getItem(He.name);case 2:if(e.t0=e.sent,null!==e.t0){e.next=6;break}return e.next=6,this.store.setItem(He.name,He);case 6:return e.next=8,this.store.getItem(Qe.name);case 8:if(e.t1=e.sent,null!==e.t1){e.next=12;break}return e.next=12,this.store.setItem(Qe.name,Qe);case 12:return t=new Map,n=!0,a=!1,r=void 0,e.prev=16,e.next=19,this.store.keys();case 19:e.t2=Symbol.iterator,s=e.sent[e.t2]();case 21:if(n=(i=s.next()).done){e.next=32;break}return o=i.value,e.t3=t,e.t4=o,e.next=27,this.store.getItem(o);case 27:e.t5=e.sent,e.t3.set.call(e.t3,e.t4,e.t5);case 29:n=!0,e.next=21;break;case 32:e.next=38;break;case 34:e.prev=34,e.t6=e["catch"](16),a=!0,r=e.t6;case 38:e.prev=38,e.prev=39,n||null==s.return||s.return();case 41:if(e.prev=41,!a){e.next=44;break}throw r;case 44:return e.finish(41);case 45:return e.finish(38);case 46:this.scenes=t;case 47:case"end":return e.stop()}}),e,this,[[16,34,38,46],[39,,41,45]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"displayScenes",get:function(){var e=[],t=!0,n=!1,a=void 0;try{for(var r,s=this.scenes.entries()[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var i=Object(o["a"])(r.value,2),c=i[0],u=i[1];e.push({name:c,thumbnail:u.thumbnail,timestamp:u.timestamp})}}catch(l){n=!0,a=l}finally{try{t||null==s.return||s.return()}finally{if(n)throw a}}return e.sort((function(e,t){return t.timestamp.localeCompare(e.timestamp)}))}}]),t}(h["c"]);Object(b["a"])([Object(h["b"])()],Ye.prototype,"scene",void 0),Ye=Object(b["a"])([h["a"]],Ye);var Ze=Ye,et=Ze,tt=(n("8a78"),Object(y["a"])(et,Je,Xe,!1,null,"05dffb92",null)),nt=tt.exports,at=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(l["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.scene=new e.equinox.WebScene,e.editorTabsAbove=["camera","environment"],e.editorTabsBelow=["documentation","save-load","advanced","licensing"],e.defaultEditorTab="documentation",e.assetDownloads=new Map,e.assetsInFlight=0,e.assets=new Map,e.store=oe.a.createInstance({driver:oe.a.INDEXEDDB,name:"equinox-asset-data-v2"}),e}return Object(p["a"])(t,e),Object(u["a"])(t,[{key:"mounted",value:function(){this.scene.set_json(Qe.json)}},{key:"getAsset",value:function(e){return this.assets.get(e)||null}},{key:"clearAssets",value:function(){this.assets.clear()}},{key:"loadAssets",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var a,r,s,i,c,u,l,d,p,b,h,v,f,m,_,g,y,x,w,k,j,O,E,C=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a=!0,r=!1,s=void 0,e.prev=3,i=this.assets.keys()[Symbol.iterator]();!(a=(c=i.next()).done);a=!0)u=c.value,t.includes(u)||this.assets.delete(u);e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](3),r=!0,s=e.t0;case 11:e.prev=11,e.prev=12,a||null==i.return||i.return();case 14:if(e.prev=14,!r){e.next=17;break}throw s;case 17:return e.finish(14);case 18:return e.finish(11);case 19:for(t=t.filter((function(e){return!C.assets.has(e)})),l=[],d=!0,p=!1,b=void 0,e.prev=24,h=t[Symbol.iterator]();!(d=(v=h.next()).done);d=!0)f=v.value,m=this.urlForAsset(f,n),_=this.assetDownloads.get(m)||this.fetchAsset(m),l.push(_),this.assetDownloads.set(m,_);e.next=32;break;case 28:e.prev=28,e.t1=e["catch"](24),p=!0,b=e.t1;case 32:e.prev=32,e.prev=33,d||null==h.return||h.return();case 35:if(e.prev=35,!p){e.next=38;break}throw b;case 38:return e.finish(35);case 39:return e.finish(32);case 40:return this.assetsInFlight=this.assetDownloads.size,g=!0,y=!1,x=void 0,e.prev=44,e.next=47,Promise.all(l);case 47:e.t2=Symbol.iterator,w=e.sent.entries()[e.t2]();case 49:if(g=(k=w.next()).done){e.next=55;break}j=Object(o["a"])(k.value,2),O=j[0],E=j[1],this.assets.set(t[O],new Uint8Array(E));case 52:g=!0,e.next=49;break;case 55:e.next=61;break;case 57:e.prev=57,e.t3=e["catch"](44),y=!0,x=e.t3;case 61:e.prev=61,e.prev=62,g||null==w.return||w.return();case 64:if(e.prev=64,!y){e.next=67;break}throw x;case 67:return e.finish(64);case 68:return e.finish(61);case 69:case"end":return e.stop()}}),e,this,[[3,7,11,19],[12,,14,18],[24,28,32,40],[33,,35,39],[44,57,61,69],[62,,64,68]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"fetchAsset",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.store.getItem(t);case 3:if(n=e.sent,null!==n){e.next=20;break}return e.next=7,fetch(new Request(t));case 7:if(a=e.sent,a.ok){e.next=14;break}if(403!==a.status&&404!==a.status){e.next=13;break}throw new Error("asset not found");case 13:throw new Error("network error: ".concat(a.status));case 14:return e.next=16,a.arrayBuffer();case 16:return r=e.sent,n=new Blob([ue.a.inflate(new Uint8Array(r)).buffer]),e.next=20,this.store.setItem(t,n);case 20:return e.abrupt("return",new Response(n).arrayBuffer());case 23:throw e.prev=23,e.t0=e["catch"](0),new Error("failed to fetch asset: ".concat(e.t0.message));case 26:return e.prev=26,this.assetDownloads.delete(t),this.assetsInFlight=this.assetDownloads.size,e.finish(26);case 30:case"end":return e.stop()}}),e,this,[[0,23,26,30]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"urlForAsset",value:function(e,t){if(e=this.assetRoot()+e,!e.endsWith(".tc.raw"))return e;if("S3TC"===t)return e.replace(".tc.raw",".s3tc.raw");if("ASTC"===t)return e.replace(".tc.raw",".astc.raw");throw new Error("no texture compression format supported")}},{key:"assetRoot",value:function(){return h["c"].config.devtools?"assets/":"https://equinox-assets.s3-ap-southeast-2.amazonaws.com/"}}]),t}(h["c"]);Object(b["a"])([Object(h["b"])()],at.prototype,"equinox",void 0),at=Object(b["a"])([Object(h["a"])({components:{EnvironmentEditor:w,CameraEditor:T,EditorContainer:I,DocumentationEditor:U,LicensingEditor:H,CanvasContainer:Ge,AdvancedEditor:se,SaveLoadEditor:nt}})],at);var rt=at,st=rt,it=(n("034f"),Object(y["a"])(st,s,i,!1,null,null,null)),ot=it.exports,ct=n("8e5f"),ut=n.n(ct),lt=n("4971"),dt=n.n(lt),pt=(n("24df"),n("a7be"),n("7a7a"),n("0dd0"),n("8822"),n("d2de"),n("f9d4"),n("ecee")),bt=n("c074"),ht=n("ad3d");pt["c"].add(bt["g"],bt["k"],bt["c"],bt["f"],bt["h"],bt["l"],bt["b"],bt["a"],bt["d"],bt["e"],bt["j"],bt["i"]),window.jsonlint=n("4ebc"),r["default"].component("multiselect",ut.a),r["default"].component("VueSlider",dt.a),r["default"].component("font-awesome-icon",ht["a"]),r["default"].config.productionTip=!1,Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=function(e){console.info("WASM module loaded: ".concat(e.version())),e.initialize_logging(),new r["default"]({render:function(t){return t(ot,{props:{equinox:e}})}}).$mount("#app")},e.next=3,n.e("chunk-8d5a7e10").then(n.bind(null,"2a46"));case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))().catch(alert)},d43b:function(e,t,n){"use strict";var a=n("3f5e"),r=n.n(a);r.a},d7e8:function(e,t,n){"use strict";var a=n("3233"),r=n.n(a);r.a},eabb:function(e,t,n){"use strict";var a=n("9ede"),r=n.n(a);r.a},fbb9:function(e,t,n){}});
//# sourceMappingURL=app.1d4da9ca.js.map